!function(e){function t(t){for(var n,u,i=t[0],l=t[1],c=t[2],h=0,p=[];h<i.length;h++)u=i[h],o[u]&&p.push(o[u][0]),o[u]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(a&&a(t);p.length;)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==o[l]&&(n=!1)}n&&(s.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},o={1:0},s=[];function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var a=l;s.push([73,4]),r()}({67:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(t.GestureTypes||(t.GestureTypes={}))},68:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Gesture=0]="Gesture",e[e.Url=1]="Url"}(t.MessageTypes||(t.MessageTypes={}))},73:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(74);chrome.runtime.onMessage.addListener(function(e,t,r){e.color?(console.log("Receive color = "+e.color),document.body.style.backgroundColor=e.color,r("Change color to "+e.color)):r("Color message is none.")});new n.CGMain},74:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(76),o=r(75),s=r(68),u=r(67),i=10;t.CGMain=class{constructor(){this.inGesture=!1,this.gestures=[],n.fromEvent(document,"contextmenu").subscribe(e=>{this.inGesture&&e.preventDefault(),this.inGesture=!1});let e=n.fromEvent(document,"mousemove").pipe(o.takeUntil(n.fromEvent(document,"mouseup").pipe(o.tap(e=>{this.anchorCoordinate=null,this.currentAnchorTarget?(console.log("is anchor",this.currentAnchorTarget),chrome.runtime.sendMessage({type:s.MessageTypes.Url,gestures:this.gestures,url:this.currentAnchorTarget.href})):chrome.runtime.sendMessage({type:s.MessageTypes.Gesture,gestures:this.gestures,url:null}),this.gestures=[]}))));n.fromEvent(document,"mousedown").pipe(o.tap(e=>{this.inGesture=!1}),o.filter(e=>this.isGestureButton(e)),o.tap(e=>{console.log("tapping mouse down is anchor"),this.currentAnchorTarget=this.lookupParentsForAnchor(e),console.log("[currentAnchorTarget]",this.currentAnchorTarget,chrome.tabs)}),o.switchMap(t=>e)).subscribe(e=>{let t=this.getCoordinate(e);if(this.anchorCoordinate||(this.anchorCoordinate=t),this.getDistance(this.anchorCoordinate,t)>i){this.inGesture=!0;let e=this.getVector(this.getDegrees(this.anchorCoordinate,t));null!=e&&((this.gestures.length>0&&this.gestures[this.gestures.length-1]!=e||0==this.gestures.length)&&this.gestures.push(e),this.anchorCoordinate=t)}}),this.setIFrameMouseEventBorderStyle()}lookupParentsForAnchor(e){console.log("this.currentAnchorTarget",e.target);let t=e.target;if(null!=t.href)return t;for(;t.parentElement;)if(null!=(t=t.parentElement).href)return t;return null}getCoordinate(e){return{x:e.clientX,y:e.clientY}}getDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}getDegrees(e,t){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}getVector(e){return e>-30&&e<30?(console.log("gesture","left"),u.GestureTypes.Left):e>60&&e<120?(console.log("gesture","up"),u.GestureTypes.Up):e>-120&&e<-60?(console.log("gesture","down"),u.GestureTypes.Down):e>150||e<-150?(console.log("gesture","right"),u.GestureTypes.Right):void console.log("undefined")}isGestureButton(e){return 2==e.button}getVectorText(){return this.gestures.map(e=>u.GestureTypes[e])}addDot(e){let t=document.createElement("div");t.style.position="absolute",t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",t.style.width="3px",t.style.height="3px",t.style.backgroundColor=0==e.button?"red":"green",document.body.appendChild(t)}setIFrameMouseEventBorderStyle(){}}}});