(()=>{"use strict";var e={5278:(e,t,r)=>{const s=r(1322);chrome.runtime.onMessage.addListener((function(e,t,r){e.color?(console.log("Receive color = "+e.color),document.body.style.backgroundColor=e.color,r("Change color to "+e.color)):r("Color message is none.")})),new s.CGMain},1322:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CGMain=void 0;const s=r(4143),n=r(1717),o=r(9638),i=r(210);t.CGMain=class{constructor(){this.inGesture=!1,this.gestures=[],this.initIndicatorElement(),s.fromEvent(document,"contextmenu").subscribe((e=>{this.inGesture&&e.preventDefault(),this.inGesture=!1}));let e=s.fromEvent(document,"mousemove").pipe(n.tap((e=>{this.showIndicator(!0)})),n.takeUntil(s.fromEvent(document,"mouseup").pipe(n.tap((e=>{this.showIndicator(!1),this.anchorCoordinate=null,this.currentAnchorTarget?(console.log("is anchor",this.currentAnchorTarget),chrome.runtime.sendMessage({type:o.MessageTypes.Url,gestures:this.gestures,url:this.currentAnchorTarget.href})):chrome.runtime.sendMessage({type:o.MessageTypes.Gesture,gestures:this.gestures,url:null}),this.gestures=[]})))));s.fromEvent(document,"mousedown").pipe(n.tap((e=>{this.inGesture=!1})),n.filter((e=>this.isGestureButton(e))),n.tap((e=>{console.log("tapping mouse down is anchor"),this.currentAnchorTarget=this.lookupParentsForAnchor(e),console.log("[currentAnchorTarget]",this.currentAnchorTarget,chrome.tabs)})),n.switchMap((t=>e))).subscribe((e=>{let t=this.getCoordinate(e);if(this.anchorCoordinate||(this.anchorCoordinate=t),this.getDistance(this.anchorCoordinate,t)>10){this.inGesture=!0;let e=this.getVector(this.getDegrees(this.anchorCoordinate,t));null!=e&&((this.gestures.length>0&&this.gestures[this.gestures.length-1]!=e||0==this.gestures.length)&&this.gestures.push(e),this.printGestures(),this.anchorCoordinate=t)}})),this.setIFrameMouseEventBorderStyle(),this.initReadyIndicatorElement()}lookupParentsForAnchor(e){console.log("this.currentAnchorTarget",e.target);let t=e.target;if(null!=t.href)return t;for(;t.parentElement;)if(t=t.parentElement,null!=t.href)return t;return null}getCoordinate(e){return{x:e.clientX,y:e.clientY}}getDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}getDegrees(e,t){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}getVector(e){return e>-30&&e<30?(console.log("gesture","left"),i.GestureTypes.Left):e>60&&e<120?(console.log("gesture","up"),i.GestureTypes.Up):e>-120&&e<-60?(console.log("gesture","down"),i.GestureTypes.Down):e>150||e<-150?(console.log("gesture","right"),i.GestureTypes.Right):void console.log("undefined")}isGestureButton(e){return 2==e.button}getVectorText(){return this.gestures.map((e=>i.GestureTypes[e]))}addDot(e){let t=document.createElement("div");t.style.position="absolute",t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",t.style.width="3px",t.style.height="3px",t.style.backgroundColor=0==e.button?"red":"green",document.body.appendChild(t)}initIndicatorElement(){this.indicatorElement=document.createElement("div"),this.indicatorElement.id="chrogestureid",this.indicatorElement.classList.add("chgs-indicator"),this.showIndicator(!1),document.body.appendChild(this.indicatorElement)}initReadyIndicatorElement(){let e=document.createElement("div");e.id="chrogestureready",e.classList.add("ready-indicator"),e.innerText="Gesture ready",e.style.visibility="hidden",document.body.appendChild(e)}showIndicator(e){this.indicatorElement.style.visibility=e?"initial":"hidden"}printGestures(){this.indicatorElement.innerText=this.gestures.map((e=>{switch(e){case i.GestureTypes.Up:return"ðŸ”¼";case i.GestureTypes.Down:return"ðŸ”½";case i.GestureTypes.Left:return"â—€";case i.GestureTypes.Right:return"â–¶"}})).join(" ")}setIFrameMouseEventBorderStyle(){}}},210:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GestureTypes=void 0,(r=t.GestureTypes||(t.GestureTypes={}))[r.Up=0]="Up",r[r.Down=1]="Down",r[r.Left=2]="Left",r[r.Right=3]="Right"},9638:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageTypes=void 0,(r=t.MessageTypes||(t.MessageTypes={}))[r.Gesture=0]="Gesture",r[r.Url=1]="Url"}},t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={exports:{}};return e[s](n,n.exports,r),n.exports}r.m=e,r.x=e=>{},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={828:0},t=[[5278,736]],s=e=>{},n=(n,o)=>{for(var i,u,[a,l,c,h]=o,d=0,p=[];d<a.length;d++)u=a[d],r.o(e,u)&&e[u]&&p.push(e[u][0]),e[u]=0;for(i in l)r.o(l,i)&&(r.m[i]=l[i]);for(c&&c(r),n&&n(o);p.length;)p.shift()();return h&&t.push.apply(t,h),s()},o=self.webpackChunkchrome_extension_typescript_starter=self.webpackChunkchrome_extension_typescript_starter||[];function i(){for(var s,n=0;n<t.length;n++){for(var o=t[n],i=!0,u=1;u<o.length;u++){var a=o[u];0!==e[a]&&(i=!1)}i&&(t.splice(n--,1),s=r(r.s=o[0]))}return 0===t.length&&(r.x(),r.x=e=>{}),s}o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o));var u=r.x;r.x=()=>(r.x=u||(e=>{}),(s=i)())})(),r.x()})();