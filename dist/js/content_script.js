(()=>{"use strict";var e={5278:(e,t,r)=>{const o=r(1322);chrome.runtime.onMessage.addListener((function(e,t,r){e.color?(console.log("Receive color = "+e.color),document.body.style.backgroundColor=e.color,r("Change color to "+e.color)):r("Color message is none.")})),new o.CGMain},1322:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CGMain=void 0;const o=r(4143),s=r(1717),n=r(9638),u=r(210);t.CGMain=class{constructor(){this.inGesture=!1,this.gestures=[],o.fromEvent(document,"contextmenu").subscribe((e=>{this.inGesture&&e.preventDefault(),this.inGesture=!1}));let e=o.fromEvent(document,"mousemove").pipe(s.takeUntil(o.fromEvent(document,"mouseup").pipe(s.tap((e=>{this.anchorCoordinate=null,this.currentAnchorTarget?(console.log("is anchor",this.currentAnchorTarget),chrome.runtime.sendMessage({type:n.MessageTypes.Url,gestures:this.gestures,url:this.currentAnchorTarget.href})):chrome.runtime.sendMessage({type:n.MessageTypes.Gesture,gestures:this.gestures,url:null}),this.gestures=[]})))));o.fromEvent(document,"mousedown").pipe(s.tap((e=>{this.inGesture=!1})),s.filter((e=>this.isGestureButton(e))),s.tap((e=>{console.log("tapping mouse down is anchor"),this.currentAnchorTarget=this.lookupParentsForAnchor(e),console.log("[currentAnchorTarget]",this.currentAnchorTarget,chrome.tabs)})),s.switchMap((t=>e))).subscribe((e=>{let t=this.getCoordinate(e);if(this.anchorCoordinate||(this.anchorCoordinate=t),this.getDistance(this.anchorCoordinate,t)>10){this.inGesture=!0;let e=this.getVector(this.getDegrees(this.anchorCoordinate,t));null!=e&&((this.gestures.length>0&&this.gestures[this.gestures.length-1]!=e||0==this.gestures.length)&&this.gestures.push(e),this.anchorCoordinate=t)}})),this.setIFrameMouseEventBorderStyle()}lookupParentsForAnchor(e){console.log("this.currentAnchorTarget",e.target);let t=e.target;if(null!=t.href)return t;for(;t.parentElement;)if(t=t.parentElement,null!=t.href)return t;return null}getCoordinate(e){return{x:e.clientX,y:e.clientY}}getDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}getDegrees(e,t){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}getVector(e){return e>-30&&e<30?(console.log("gesture","left"),u.GestureTypes.Left):e>60&&e<120?(console.log("gesture","up"),u.GestureTypes.Up):e>-120&&e<-60?(console.log("gesture","down"),u.GestureTypes.Down):e>150||e<-150?(console.log("gesture","right"),u.GestureTypes.Right):void console.log("undefined")}isGestureButton(e){return 2==e.button}getVectorText(){return this.gestures.map((e=>u.GestureTypes[e]))}addDot(e){let t=document.createElement("div");t.style.position="absolute",t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",t.style.width="3px",t.style.height="3px",t.style.backgroundColor=0==e.button?"red":"green",document.body.appendChild(t)}setIFrameMouseEventBorderStyle(){}}},210:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GestureTypes=void 0,(r=t.GestureTypes||(t.GestureTypes={}))[r.Up=0]="Up",r[r.Down=1]="Down",r[r.Left=2]="Left",r[r.Right=3]="Right"},9638:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageTypes=void 0,(r=t.MessageTypes||(t.MessageTypes={}))[r.Gesture=0]="Gesture",r[r.Url=1]="Url"}},t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.m=e,r.x=e=>{},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={828:0},t=[[5278,736]],o=e=>{},s=(s,n)=>{for(var u,i,[l,a,c,h]=n,g=0,p=[];g<l.length;g++)i=l[g],r.o(e,i)&&e[i]&&p.push(e[i][0]),e[i]=0;for(u in a)r.o(a,u)&&(r.m[u]=a[u]);for(c&&c(r),s&&s(n);p.length;)p.shift()();return h&&t.push.apply(t,h),o()},n=self.webpackChunkchrome_extension_typescript_starter=self.webpackChunkchrome_extension_typescript_starter||[];function u(){for(var o,s=0;s<t.length;s++){for(var n=t[s],u=!0,i=1;i<n.length;i++){var l=n[i];0!==e[l]&&(u=!1)}u&&(t.splice(s--,1),o=r(r.s=n[0]))}return 0===t.length&&(r.x(),r.x=e=>{}),o}n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n));var i=r.x;r.x=()=>(r.x=i||(e=>{}),(o=u)())})(),r.x()})();